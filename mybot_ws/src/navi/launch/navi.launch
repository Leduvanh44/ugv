<launch>
  <arg name="avoid_enabled" default="false" />
  <arg name="enable_urg_node" default="true" />
  <arg name="gps_enabled" default="false" />
  <!-- <arg name="enable_imu" default="false"/> -->
  <arg name="enable_guider" default="false"/>
  <!-- <arg name="enable_controller" default="false"/> -->
  <arg name="enable_can" default="true"/>
  <arg name="enable_mqtt" default="false"/>

<group if="$(arg enable_urg_node)">
  <node name="urg_node" pkg="urg_node" type="urg_node" output="screen">
    <param name="ip_address" value=""/>
    <param name="serial_port" value="/dev/ttyACM1"/>
    <param name="serial_baud" value="115200"/>
    <param name="frame_id" value="base_link"/>
    <param name="calibrate_time" value="false"/>
    <param name="publish_intensity" value="true"/>
    <param name="publish_multiecho" value="false"/>
    <param name="enable_urg-node" value="true"/>
  </node>
</group>

<group if="$(arg gps_enabled)">
<node name = "gps_node1" pkg = "serial_gps" type="gps_node1" output="screen">
  <param name="enable_gps" value="true"/> 
  <param name="gps_port" value="/dev/ttyUSB0"/>
  <param name="gps_baud" value="115200"/>
  <param name="ref_lat" value=" 10.88133"/>
  <param name="ref_lon" value="106.80508"/>
</node>
</group>
<group if="$(arg avoid_enabled)">
<node name = "obstacle_node" pkg = "outdoor_obstacle" type="obstacle_node" output="screen">
</node>
</group>



<group if="$(arg enable_mqtt)">
<!-- <node name = "test_node" pkg = "mqtt_start" type="test_node.py" output="screen">
</node> -->
<node name = "start_mq_node" pkg = "mqtt_start" type="start_mq_node.py" output="screen">
</node>
</group>


<!-- <group if="$(arg enable_imu)">
<node name = "imu_node" pkg = "mpu_6050_driver" type="imu_node" output="screen">
</node>
</group> -->

<group if="$(arg enable_guider)">
  <node pkg="guider" type="guider_node" name="guider_node" output="screen" >
    <param name="guiding_period" value="0.1" />
    <param name="set_speed" value="5"/>
    <param name="set_heading" value="1.33866753628" />
    <param name="LOS_radius" value="6.0"/>
    <param name="LOS_min_delta" value="6.0"/>
    <param name="LOS_max_delta" value="7.9" />
    <param name="LOS_beta" value="0.0" />
    <param name="ned_lat" value="10.772580"/>
    <param name="ned_lon" value="106.658790"/>
  </node>
</group>

<!-- <group if="$(arg enable_controller)">
  <node pkg="controller" type="controller" name="controller"  >
    <param name="controlling_period" value="0.02" />
    <param name="diff_rpm" value="45.0" />
    <param name="heading_Kp" value="45.0" />
    <param name="heading_Ki" value="0.0" />
    <param name="heading_Kd" value="15.0" />
    <param name="wheel_radius" value="0.125"/>
  </node>
</group> -->

<group if="$(arg enable_can)">
<node name = "can_node" pkg = "serial_can" type="can_node" output="screen">
  <param name="enable_can" value="true"/> 
  <param name="can_port" value="/dev/ttyUSB0"/>
  <param name="can_baud" value="115200"/>
  <!-- <param name="enable_gps" value="true"/> 
  <param name="gps_port" value="/dev/ttyUSB0"/>
  <param name="gps_baud" value="115200"/>
  <param name="ned_lat" value="10.88132"/>
  <param name="ned_lon" value="106.80615"/> -->
</node>
</group>

</launch>
